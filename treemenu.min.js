function DetectTransition(t){var e=function(e){var n,r;(n=e.target).hasAttribute(t.AttributeCheck)&&((r=(r=n.getAttribute(t.AttributeWrite))&&""!=r?JSON.parse(r):{})[e.propertyName]||(r[e.propertyName]=!0,n.setAttribute(t.AttributeWrite,JSON.stringify(r))))},n=function(e){var n,r,i;if((n=e.target).hasAttribute(t.AttributeCheck)){for(i in r=n.getAttribute(t.AttributeWrite),(r=JSON.parse(r))[e.propertyName]=!1,r)if(1==r[i])return void n.setAttribute(t.AttributeWrite,JSON.stringify(r));n.setAttribute(t.AttributeWrite,""),t.HandlerStop(n,e)}};return document.addEventListener("transitionrun",e),document.addEventListener("transitionend",n),function(){document.removeEventListener("transitionrun",e),document.removeEventListener("transitionend",n)}}function TreeMenu(t){var e=t;function n(t,e,n){null!=n&&(t.style.transition=n),t.style.height=e}function r(t,n,r){0==r&&t.setAttribute(e.Live,""),t.setAttribute(e.Open,n)}function i(t,n){return null!=n?""!=t.getAttribute(e.Live):"true"==t.getAttribute(e.Open)}function u(t,u,c){var a,s,f,l,A;if(a=t.querySelector("["+e.Menu+"]"),s=t.querySelector("["+e.Button+"]"),u!=(A=i(a)))return l=((f=null==u?!A:u)?a.scrollHeight:0)+"px",c?(r(a,f,!1),n(a,l,"none"),setTimeout(function(){n(a,l,"")})):(r(a,f),n(a,a.clientHeight+"px",""),setTimeout(function(){var t,r;n(a,l,""),r=i(t=a)?parseInt(t.style.height):-t.scrollHeight,o(t,!1,e.Menu,function(t){i(t,!0)&&(console.log("Height Adjust",r,t),n(t,parseInt(t.style.height)+r+"px",""))})})),r(s,f),f}function o(t,e,n,r){var i,u;if(e){for(i=t.querySelectorAll("["+n+"]")||[],u=0;u<i.length;u++)if(r(i[u]))return}else for(u=t.parentNode;u!=document.body;){if(u.hasAttribute(n)&&r(u))return;u=u.parentNode}}function c(t){var n,r,i,c;for(t.target.hasAttribute(e.Button)&&o(t.target,!1,e.Branch,function(t){return n=t,u(t,null),!0}),r=document.querySelectorAll("["+e.Root+"]"),c=0;c<r.length;c++)if(!(i=r[c]).contains(t.target)){o(i,!1,e.Root,function(e){if(e.contains(t.target))return!0;i=e});var a=!1;o(i,!1,e.Root,function(t){if(t==n)return a=!0,!0}),a||u(i,!1)}}return DetectTransition({AttributeWrite:e.Live,AttributeCheck:e.Open,HandlerStop:function(t,r){i(t)?n(t,"auto",""):o(t,!0,e.Branch,function(t){u(t,!1,!0)})}}),document.addEventListener("click",c),function(){document.removeEventListener("click",c)}}