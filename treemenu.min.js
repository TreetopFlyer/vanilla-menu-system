function DetectTransition(t){var e=function(e){var n,r,i;(n=e.target).hasAttribute(t.AttributeCheck)&&((r=n.getAttribute(t.AttributeWrite))&&""!=r?(i=!1,r=JSON.parse(r)):(i=!0,r={}),r[e.propertyName]||(r[e.propertyName]=!0,n.setAttribute(t.AttributeWrite,JSON.stringify(r)),i&&t.HandlerStart(n,e)))},n=function(e){var n,r,i;if((n=e.target).hasAttribute(t.AttributeCheck)){for(i in r=n.getAttribute(t.AttributeWrite),(r=JSON.parse(r))[e.propertyName]=!1,r)if(1==r[i])return void n.setAttribute(t.AttributeWrite,JSON.stringify(r));n.setAttribute(t.AttributeWrite,""),t.HandlerStop(n,e)}};return document.addEventListener("transitionrun",e),document.addEventListener("transitionend",n),function(){document.removeEventListener("transitionrun",e),document.removeEventListener("transitionend",n)}}function DetectAway(t){function e(e){var n,r;if(r=document.querySelectorAll("["+t.AttributeRoot+"]"))for(n=0;n<r.length;n++)(r[n].contains(e.target)?t.HandlerInside:t.HandlerAway)(r[n],e)}return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}function TreeMenu(t){var e=t;function n(t,e,n){null!=n&&(t.style.transition=n),t.style.height=e}function r(t,n,r){0==r&&t.setAttribute(e.Live,""),t.setAttribute(e.Open,n)}function i(t,n){return null!=n?""!=t.getAttribute(e.Live):"true"==t.getAttribute(e.Open)}function u(t,u,o){var a,c,s,l;a=t.querySelector("["+e.Menu+"]"),c=t.querySelector("["+e.Button+"]"),s=null==u?!i(a):u,l=(s?a.scrollHeight:0)+"px",o?(r(a,s,!1),n(a,l,"none")):(r(a,s),n(a,a.clientHeight+"px","")),setTimeout(function(){n(a,l,"")}),r(c,s)}function o(t,e,n,r){var i,u;if(e){for(i=t.querySelectorAll("["+n+"]")||[],u=0;u<i.length;u++)if(r(i[u]))return}else for(u=t.parentNode;u!=document;){if(u.hasAttribute(n)&&r(u))return;u=u.parentNode}}DetectTransition({AttributeWrite:e.Live,AttributeCheck:e.Open,HandlerStart:function(t,r){var u;u=i(t)?parseInt(t.style.height):-t.scrollHeight,o(t,!1,e.Menu,function(t){i(t,!0)&&n(t,parseInt(t.style.height)+u+"px","")})},HandlerStop:function(t,r){i(t)?n(t,"auto",""):o(t,!0,e.Branch,function(t){u(t,!1,!0)})}}),DetectAway({AttributeRoot:e.Root,HandlerInside:function(t,n){n.target.hasAttribute(e.Button)&&o(n.target,!1,e.Branch,function(t){return u(t,null),!0})},HandlerAway:function(t,e){u(t,!1)}})}