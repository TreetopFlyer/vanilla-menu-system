<!DOCTYPE html>
<html>
    <head>
        <style>
            [data-open]
            {
                position:relative;
                display:block;
                width:300px;
                height:300px;
                background:red;
                transition:width 1s, height 2s;
            }
            [data-open='true']
            {
                width:600px;
                height:100px;
            }

        </style>
    </head>
    <body>

        <div>
            <button id="button">Toggle</button>
            <div id="menu" data-open="false"></div>
        </div>

        <script>
            function TransitionDone(inElement)
            {
                var keys = {};

                var handleRun = function(inEvent)
                {
                    if(inEvent.target != inEvent.currentTarget){return;}
                    if(keys[inEvent.propertyName]){return;}

                    keys[inEvent.propertyName] = true;
                    console.log("start", keys);
                };
                var handleEnd = function(inEvent)
                {
                    if(inEvent.target != inEvent.currentTarget){return;}
                    
                    keys[inEvent.propertyName] = false;

                    for(var key in keys)
                    {
                        if(keys[key] == true)
                        {
                            return;
                        }
                    }
                    console.log("stop", keys);
                };

                inElement.addEventListener("transitionrun", handleRun);
                inElement.addEventListener("transitionend", handleEnd);
            }
        </script>
        <script>
            var button, menu;
            button = document.querySelector("#button");
            menu = document.querySelector("#menu");
            button.addEventListener("click", function(e)
            {
                if(menu.getAttribute("data-open") == "true")
                {
                    menu.setAttribute("data-open", false);
                }
                else
                {
                    menu.setAttribute("data-open", true);
                }
            }
            );
            TransitionDone(menu);
            
        </script>

    </body>
</html>